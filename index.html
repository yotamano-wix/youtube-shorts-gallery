<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Shorts Carousel</title>
  <style>
    /* Full Width and 800px Fixed Height */
    .carousel-container {
      display: flex;
      overflow: hidden;
      width: 100%;
      height: 800px;
      position: relative;
    }

    /* Wrapper for videos with smooth scrolling animation */
    .carousel-wrapper {
      display: flex;
      animation: scroll 25s linear infinite;
    }

    .carousel-wrapper:hover {
      animation-play-state: paused; /* Pause animation on hover */
    }

    /* Each video container */
    .video-container {
      position: relative;
      width: 100%;
      height: 800px;
      margin: 0 5px;
    }

    /* Mute/Unmute button styling */
    .mute-button {
      position: absolute;
      bottom: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      border-radius: 50%;
      padding: 8px 12px;
      cursor: pointer;
      font-size: 1.5rem;
    }

    /* Smooth scrolling animation */
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
  </style>
</head>
<body>
  <div class="carousel-container">
    <div class="carousel-wrapper" id="videoGallery"></div>
  </div>

  <script>
    // Fetch videos from Wix backend and display them
    async function loadVideos() {
      try {
        const response = await fetch('https://your-wix-site.com/_functions/youtubeCacheModule/getCachedYouTubeVideos');
        const videos = await response.json();

        const gallery = document.getElementById('videoGallery');

        // Clear any existing content in the gallery
        gallery.innerHTML = '';

        // Append video iframes with custom mute/unmute functionality
        videos.forEach((video, index) => {
          const videoContainer = document.createElement('div');
          videoContainer.classList.add('video-container');

          // Create the iframe
          const iframe = document.createElement('iframe');
          iframe.src = `https://www.youtube.com/embed/${video.videoId}?autoplay=1&mute=1&loop=1&playlist=${video.videoId}&controls=0&showinfo=0&modestbranding=1`;
          iframe.allow = "autoplay";
          iframe.width = '100%';
          iframe.height = '800px';
          iframe.style.border = 'none';
          videoContainer.appendChild(iframe);

          // Mute/Unmute button
          const muteButton = document.createElement('button');
          muteButton.classList.add('mute-button');
          muteButton.textContent = 'ðŸ”‡';
          muteButton.onclick = () => toggleMute(iframe, muteButton);
          videoContainer.appendChild(muteButton);

          gallery.appendChild(videoContainer);
        });
      } catch (error) {
        console.error("Error loading videos:", error);
      }
    }

    // Toggle mute/unmute for each iframe
    function toggleMute(iframe, button) {
      const isMuted = iframe.src.includes("mute=1");
      iframe.src = isMuted 
        ? iframe.src.replace("mute=1", "mute=0")
        : iframe.src.replace("mute=0", "mute=1");
      
      button.textContent = isMuted ? 'ðŸ”Š' : 'ðŸ”‡';
    }

    // Load videos on page load
    loadVideos();
  </script>
</body>
</html>
