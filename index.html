<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Shorts Carousel</title>
  <style>
    /* Full Width and 800px Fixed Height */
    .carousel-container {
      display: flex;
      overflow: hidden;
      width: 100%;
      height: 800px;
      position: relative;
    }

    /* Wrapper for videos with smooth scrolling animation */
    .carousel-wrapper {
      display: flex;
      animation: scroll 25s linear infinite;
    }

    .carousel-wrapper:hover {
      animation-play-state: paused; /* Pause animation on hover */
    }

    /* Each video container */
    .video-container {
      position: relative;
      width: calc((9 / 16) * 800px); /* Dynamic width based on 9:16 aspect ratio */
      height: 800px;
      margin-right: 4px; /* 4px margin between videos */
    }

    /* Smooth scrolling animation */
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
  </style>
</head>
<body>
  <div class="carousel-container">
    <div class="carousel-wrapper" id="videoGallery"></div>
  </div>

  <script>
    // Function to get URL parameters
    function getVideoParams() {
      const urlParams = new URLSearchParams(window.location.search);
      const videos = [];
      for (const [key, value] of urlParams.entries()) {
        if (key.startsWith('video')) {
          videos.push(value);
        }
      }
      return videos;
    }

    // Load videos from URL parameters
    function loadVideosFromParams() {
      const videos = getVideoParams();
      const gallery = document.getElementById('videoGallery');

      // Clear any existing content in the gallery
      gallery.innerHTML = '';

      // Append video iframes with hover mute/unmute functionality
      videos.forEach(videoId => {
        const videoContainer = document.createElement('div');
        videoContainer.classList.add('video-container');

        // Create the iframe
        const iframe = document.createElement('iframe');
        iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&loop=1&playlist=${videoId}&controls=0&showinfo=0&modestbranding=1`;
        iframe.allow = "autoplay";
        iframe.width = '100%';
        iframe.height = '100%';
        iframe.style.border = 'none';

        // Unmute on hover
        iframe.addEventListener("mouseover", () => toggleMute(iframe, false));
        iframe.addEventListener("mouseleave", () => toggleMute(iframe, true));

        videoContainer.appendChild(iframe);
        gallery.appendChild(videoContainer);
      });
    }

    // Toggle mute/unmute for iframe
    function toggleMute(iframe, mute) {
      const currentSrc = iframe.src;
      const newSrc = mute
        ? currentSrc.replace("mute=0", "mute=1")
        : currentSrc.replace("mute=1", "mute=0");

      if (currentSrc !== newSrc) {
        iframe.src = newSrc;
      }
    }

    // Load videos on page load
    loadVideosFromParams();
  </script>
</body>
</html>
